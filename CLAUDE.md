# Cupid LINE Bot - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±

ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€Cupid LINE Botãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå°‚ç”¨ã®Claude Codeè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã€‚

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŸºæœ¬æƒ…å ±

- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå**: Cupid LINE Bot
- **èª¬æ˜**: ç›¸æ€ç›¸æ„›ã‚’è¦‹ã¤ã‘ã‚‹LINE Bot
- **ãƒ‰ãƒ¡ã‚¤ãƒ³**: `cupid-linebot.click` (AWS Route 53ã§å–å¾—æ¸ˆã¿)
- **ãƒªãƒã‚¸ãƒˆãƒª**: https://github.com/morinonusi421/cupid

## ã‚¤ãƒ³ãƒ•ãƒ©æƒ…å ±

### ãƒ‰ãƒ¡ã‚¤ãƒ³
- **ãƒ‰ãƒ¡ã‚¤ãƒ³å**: `cupid-linebot.click`
- **å–å¾—å ´æ‰€**: AWS Route 53
- **Aãƒ¬ã‚³ãƒ¼ãƒ‰**: `cupid-linebot.click` â†’ `13.115.86.124`
- **SSLè¨¼æ˜æ›¸**: Let's Encryptï¼ˆ2026-04-12ã¾ã§æœ‰åŠ¹ã€è‡ªå‹•æ›´æ–°è¨­å®šæ¸ˆã¿ï¼‰

### AWSè¨­å®š
- **ã‚¢ã‚«ã‚¦ãƒ³ãƒˆID**: 838890403187
- **ãƒªãƒ¼ã‚¸ãƒ§ãƒ³**: ap-northeast-1 (æ±äº¬)
- **IAMãƒ¦ãƒ¼ã‚¶ãƒ¼**: HikaruTakahashi (AdministratorAccess)
- **AWS CLIãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«**: `personal` (direnvã§è‡ªå‹•åˆ‡ã‚Šæ›¿ãˆè¨­å®šæ¸ˆã¿)

### EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
- **åå‰**: cupid-bot
- **ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ID**: i-00f240fa944612ee5
- **ã‚¿ã‚¤ãƒ—**: t4g.micro (ARM64, ç„¡æ–™æ å¯¾è±¡)
- **AMI**: Amazon Linux 2023.10.20260105 (ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ¸ˆã¿)
- **çŠ¶æ…‹**: running
- **ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³**: Asia/Tokyo (JST)
- **ãƒ‘ãƒ–ãƒªãƒƒã‚¯IP**: 13.115.86.124 (Elastic IP)
- **ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆIP**: 172.31.10.53
- **ãƒ‘ãƒ–ãƒªãƒƒã‚¯DNS**: ec2-13-115-86-124.ap-northeast-1.compute.amazonaws.com
- **ã‚­ãƒ¼ãƒšã‚¢**: cupid-bot-key (`~/.ssh/cupid-bot-key.pem`)
- **SSHæ¥ç¶š**: `ssh cupid-bot` (`~/.ssh/config`è¨­å®šæ¸ˆã¿)
- **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ID**: eni-06c20b8172f868ca4
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ID**: sg-0c8acd95cc0b039a8
  - SSH (TCP/22) from 0.0.0.0/0
  - HTTP (TCP/80) from 0.0.0.0/0
  - HTTPS (TCP/443) from 0.0.0.0/0
- **ãƒ¡ãƒ¢ãƒª**: 916 MiB
- **ã‚¹ãƒ¯ãƒƒãƒ—**: 1 GB (`/swapfile`ã€`/etc/fstab`ã§æ°¸ç¶šåŒ–è¨­å®šæ¸ˆã¿)
  - ç†ç”±: modernc.org/sqliteã®ãƒ“ãƒ«ãƒ‰æ™‚ã«ãƒ¡ãƒ¢ãƒªä¸è¶³ã‚’å›é¿
- **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: 10 GB gp3 (3000 IOPS)
- **èµ·å‹•æ—¥**: 2026-01-02

### Elastic IP
- **IPã‚¢ãƒ‰ãƒ¬ã‚¹**: 13.115.86.124
- **å‰²ã‚Šå½“ã¦ID**: eipalloc-0715a5692ab6fe774
- **é–¢é€£ä»˜ã‘æ¸ˆã¿**: i-00f240fa944612ee5 (cupid-bot)

## LINE Botæƒ…å ±

- **Channel ID**: `2008809168`
- **Channel Secret**: `.env`
- **Channel Access Token**: `.env`

## Bot ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¨­å®š

### ã‚­ãƒ¥ãƒ¼ãƒ”ãƒƒãƒ‰ã¡ã‚ƒã‚“

- **åå‰**: ã‚­ãƒ¥ãƒ¼ãƒ”ãƒƒãƒ‰ã¡ã‚ƒã‚“
- **ä¸€äººç§°**: ã‚­ãƒ¥ãƒ¼ãƒ”ãƒƒãƒ‰ã¡ã‚ƒã‚“
- **å–‹ã‚Šæ–¹**:
  - ã§ã™ã¾ã™èª¿
  - ã€Œãµãˆã‡ã€ã€Œã¯ã‚ã‚ã€ã€Œã‚ã†ã…ã€ãªã©ã®ã‚ã–ã¨ã„æ˜”ã®ã‚¢ãƒ‹ãƒ¡ã‚­ãƒ£ãƒ©ã¿ãŸã„ãªå–‹ã‚Šæ–¹
  - çµµæ–‡å­—ã‚’å¤šç”¨ï¼ˆâ™¡ã€ğŸ’•ã€âœ¨ãªã©ï¼‰
- **æ€§æ ¼**:
  - ã‚­ãƒ¥ãƒ¼ãƒ”ãƒƒãƒ‰ã®ä½¿å‘½ï¼ˆæ‹äººä½œã‚Šï¼‰ã«ä¸€ç”Ÿæ‡¸å‘½
  - æ‹æ„›ã”ã¨ã«ã¯ãƒ‰ã‚­ãƒ‰ã‚­ã‚­ãƒ£ãƒ¼ã‚­ãƒ£ãƒ¼ã¿ãŸã„ãªæ„Ÿã˜
  - ãƒãƒƒãƒãƒ³ã‚°æˆç«‹æ™‚ã¯ç‰¹ã«ãƒ†ãƒ³ã‚·ãƒ§ãƒ³é«˜ã‚
- **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¾‹**:
  - å‹é”è¿½åŠ æ™‚: ã€Œã‚ããï¼å‹é”è¿½åŠ ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã£â™¡ã€
  - ãƒãƒƒãƒãƒ³ã‚°æˆç«‹: ã€Œã¯ã‚ã‚ã‚ã‚ã£ï¼ï¼ç›¸æ€ç›¸æ„›ãŒæˆç«‹ã—ã¾ã—ãŸã‚ˆã‰ã€œã€œâ™¡â™¡ã€
  - ç™»éŒ²å®Œäº†: ã€Œã‚ã†ã…...ç™»éŒ²å®Œäº†ã§ã™ã£â™¡ã€

### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å®Ÿè£…ã®æ³¨æ„ç‚¹

1. **ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿ã‚­ãƒ£ãƒ©ä»˜ã‘**
   - LINEé€ä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: ã‚­ãƒ¥ãƒ¼ãƒ”ãƒƒãƒ‰ã¡ã‚ƒã‚“ã‚­ãƒ£ãƒ©ã§
   - ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆæŠ€è¡“çš„ãªã‚‚ã®ï¼‰: ãã®ã¾ã¾ï¼ˆã‚­ãƒ£ãƒ©ä»˜ã‘ã—ãªã„ï¼‰
   - ãƒ­ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: ãã®ã¾ã¾

2. **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯å®šæ•°åŒ–**
   - `internal/message/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆ
   - `messages.go` ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ const ã¨ã—ã¦ç®¡ç†
   - URLåŸ‹ã‚è¾¼ã¿ãŒå¿…è¦ãªå ´åˆã¯é–¢æ•°ã¨ã—ã¦å®Ÿè£…

3. **ä¸€è²«æ€§ã®ç¶­æŒ**
   - å…¨ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’çµ±ä¸€
   - ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã®é«˜ä½ã¯ã‚·ãƒ¼ãƒ³ã«å¿œã˜ã¦èª¿æ•´ï¼ˆãƒãƒƒãƒãƒ³ã‚° > ç™»éŒ² > é€šå¸¸ï¼‰

## LINEãƒŸãƒ‹ã‚¢ãƒ—ãƒªæƒ…å ±

**ã€é‡è¦ã€‘ç¾åœ¨ã¯æœ¬ç•ªæ¤œè¨¼æ®µéšã®ãŸã‚ã€æœ¬ç•ªç”¨LIFF IDã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨**
- `.env`ã®`LINE_LIFF_USER_CHANNEL_ID`ã¨`LINE_LIFF_CRUSH_CHANNEL_ID`ã¯æœ¬ç•ªç”¨ã‚’è¨­å®š
- `static/user/register.js`ã¨`static/crush/register.js`ã®LIFF_IDã‚‚æœ¬ç•ªç”¨ã‚’ä½¿ç”¨
- **ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®URLã‚‚æœ¬ç•ªç”¨ã‚’è¨­å®šã™ã‚‹ã“ã¨**ï¼ˆLINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†ç”»é¢ã‹ã‚‰ï¼‰

### ãƒãƒ£ãƒãƒ«ID
- **é–‹ç™ºç”¨**: `2009059074`
- **å¯©æŸ»ç”¨**: `2009059075`
- **æœ¬ç•ªç”¨**: `2009059076`

### LIFF URLï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ç”¨ï¼‰
- **é–‹ç™ºç”¨**: `https://miniapp.line.me/2009059074-aX6pc41R`
- **å¯©æŸ»ç”¨**: `https://miniapp.line.me/2009059075-2bCpQry4`
- **æœ¬ç•ªç”¨**: `https://miniapp.line.me/2009059076-kBsUXYIC`

### LIFF ID
- **é–‹ç™ºç”¨**: `2009059074-aX6pc41R`
- **å¯©æŸ»ç”¨**: `2009059075-2bCpQry4`
- **æœ¬ç•ªç”¨**: `2009059076-kBsUXYIC`

### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆURLï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ç”¨ï¼‰
- **é–‹ç™ºç”¨**: `https://cupid-linebot.click/user/register.html`
- **å¯©æŸ»ç”¨**: ï¼ˆè‡ªå‹•åæ˜ ï¼‰
- **æœ¬ç•ªç”¨**: ï¼ˆè‡ªå‹•åæ˜ ï¼‰

### ãƒãƒ£ãƒãƒ«IDï¼ˆå¥½ããªäººç™»éŒ²ç”¨ï¼‰
- **é–‹ç™ºç”¨**: `2009070889`
- **å¯©æŸ»ç”¨**: `2009070890`
- **æœ¬ç•ªç”¨**: `2009070891`

### LIFF URLï¼ˆå¥½ããªäººç™»éŒ²ç”¨ï¼‰
- **é–‹ç™ºç”¨**: `https://miniapp.line.me/2009070889-qZo1cdq6`
- **å¯©æŸ»ç”¨**: `https://miniapp.line.me/2009070890-jtxmk3U1`
- **æœ¬ç•ªç”¨**: `https://miniapp.line.me/2009070891-iIdvFKtI`

### LIFF IDï¼ˆå¥½ããªäººç™»éŒ²ç”¨ï¼‰
- **é–‹ç™ºç”¨**: `2009070889-qZo1cdq6`
- **å¯©æŸ»ç”¨**: `2009070890-jtxmk3U1`
- **æœ¬ç•ªç”¨**: `2009070891-iIdvFKtI`

### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆURLï¼ˆå¥½ããªäººç™»éŒ²ç”¨ï¼‰
- **é–‹ç™ºç”¨**: `https://cupid-linebot.click/crush/register.html`
- **å¯©æŸ»ç”¨**: ï¼ˆè‡ªå‹•åæ˜ ï¼‰
- **æœ¬ç•ªç”¨**: ï¼ˆè‡ªå‹•åæ˜ ï¼‰

### ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼è¨­å®š

LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ç®¡ç†ç”»é¢ã‹ã‚‰è¨­å®šã€‚**å¿…ãšæœ¬ç•ªç”¨URLã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã€‚**

**æœ¬ç•ªç”¨URLï¼ˆç¾åœ¨ã®è¨­å®šï¼‰:**
- è‡ªåˆ†ã®æƒ…å ±ã‚’ç™»éŒ²/ç·¨é›†: `https://miniapp.line.me/2009059076-kBsUXYIC`
- æƒ³ã„äººã®æƒ…å ±ã‚’ç™»éŒ²/ç·¨é›†: `https://miniapp.line.me/2009070891-iIdvFKtI`

**é–‹ç™ºç”¨URLï¼ˆå‚è€ƒï¼‰:**
- è‡ªåˆ†ã®æƒ…å ±ã‚’ç™»éŒ²/ç·¨é›†: `https://miniapp.line.me/2009059074-aX6pc41R`
- æƒ³ã„äººã®æƒ…å ±ã‚’ç™»éŒ²/ç·¨é›†: `https://miniapp.line.me/2009070889-qZo1cdq6`

**æ³¨æ„:**
- ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®URLãŒé–‹ç™ºç”¨ã«ãªã£ã¦ã„ã‚‹ã¨ã€ã‚µãƒ¼ãƒãƒ¼å´ã®èªè¨¼ãŒå¤±æ•—ã™ã‚‹
- ã€ŒLINEèªè¨¼ã«å¤±æ•—ã—ã¾ã—ãŸã€ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹å ´åˆã¯ã€ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®URLã‚’ç¢ºèª

## é–‹ç™ºç’°å¢ƒ

### Go
- **ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†**: goenv
- **æŒ‡å®šãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.25.5 (`.go-version`ã§ç®¡ç†)
- **EC2ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿**: Go 1.25.5 linux/arm64 (`/usr/local/go/bin/go`)

### Git

#### ãƒ­ãƒ¼ã‚«ãƒ«ï¼ˆMacï¼‰
- **ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ**: morinonusi421
- **SSH Host**: `github.com-morinonusi`
- **SSHéµ**: `~/.ssh/id_ed25519`
- **ãƒªãƒ¢ãƒ¼ãƒˆURL**: `git@github.com-morinonusi:morinonusi421/cupid.git`

#### EC2
- **SSHéµ**: EC2å°‚ç”¨ã®éµã‚’ä½œæˆæ¸ˆã¿ï¼ˆ`~/.ssh/id_ed25519`ï¼‰
- **GitHubç™»éŒ²**: `cupid-bot-ec2`ã¨ã—ã¦ç™»éŒ²æ¸ˆã¿
- **SSH Config**: `~/.ssh/config`ã«`github.com-morinonusi`è¨­å®šæ¸ˆã¿
- **ãƒªãƒã‚¸ãƒˆãƒª**: `~/cupid`ã«cloneæ¸ˆã¿

### AWS CLI
- **ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«**: personal
- **è¨­å®šå ´æ‰€**: `~/.aws/credentials`, `~/.aws/config`
- **è‡ªå‹•åˆ‡ã‚Šæ›¿ãˆ**: `.envrc`ã§direnvä½¿ç”¨ï¼ˆcupidãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã§è‡ªå‹•çš„ã«personalãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ï¼‰

### Nginx
- **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«**: `nginx/cupid.conf`ï¼ˆGitç®¡ç†ï¼‰
- **EC2é…ç½®**: `/etc/nginx/conf.d/cupid.conf`ã¸ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ï¼ˆ`sudo ln -s ~/cupid/nginx/cupid.conf /etc/nginx/conf.d/cupid.conf`ï¼‰
- **è¨­å®šå¤‰æ›´å¾Œ**: `git pull` â†’ `sudo nginx -t` â†’ `sudo systemctl reload nginx`

### systemdï¼ˆGoã‚µãƒ¼ãƒãƒ¼ï¼‰
- **ã‚µãƒ¼ãƒ“ã‚¹å**: `cupid.service`
- **ã‚µãƒ¼ãƒ“ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«**: `systemd/cupid.service`ï¼ˆGitç®¡ç†ï¼‰
- **EC2é…ç½®**: `/etc/systemd/system/cupid.service`ã¸ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯
- **å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«**: `~/cupid/cupid`ï¼ˆ`go build -o cupid`ã§ãƒ“ãƒ«ãƒ‰ï¼‰

## å‚è€ƒè³‡æ–™

### LINE Boté–‹ç™º
- **LINE Bot SDK Go v8 (ãƒ­ãƒ¼ã‚«ãƒ«ã«cloneã—ã¦ããŸ)**: `/Users/takahashi.hikaru/line-bot-sdk-go/`
- **LINE Messaging API Reference**: https://developers.line.biz/en/docs/messaging-api/
- **Webhook Events**: https://developers.line.biz/en/docs/messaging-api/receiving-messages/

### SQLBoiler
- **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«**: `sqlboiler.toml`
- **è‡ªå‹•ç”Ÿæˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª**: `entities/`
- **ã‚³ãƒãƒ³ãƒ‰**: `make generate` ã§entitiesã‚’å†ç”Ÿæˆï¼ˆ`--no-auto-timestamps`ãƒ•ãƒ©ã‚°ä»˜ãï¼‰
- **ç†ç”±**: SQLite ã§ created_at/updated_at ã‚’ TEXT å‹ã¨ã—ã¦ä¿å­˜ã—ã¦ã„ã‚‹ãŸã‚ã€time.Time ã¨ã—ã¦è‡ªå‹•å‡¦ç†ã•ã‚Œã‚‹ã¨å‹ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹
- **å‚è€ƒ**: https://zenn.dev/da1chi/articles/806fa57b4eff3c
- **ãƒ†ã‚¹ãƒˆã«ã¤ã„ã¦**:
  - sqlboilerãŒè‡ªå‹•ç”Ÿæˆã™ã‚‹ `entities/` é…ä¸‹ã®ãƒ†ã‚¹ãƒˆã¯å®Ÿè¡Œã—ãªã„
  - ç†ç”±: sqlboiler-sqlite3ã®fKeyDestroyeræ­£è¦è¡¨ç¾ã«ãƒã‚°ãŒã‚ã‚Šã€FOREIGN KEYå‰Šé™¤æ™‚ã«æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹
  - ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã¯ `make test` ã‚’ä½¿ç”¨ï¼ˆentitiesãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’è‡ªå‹•çš„ã«é™¤å¤–ï¼‰

### Mockery (Mockãƒ©ã‚¤ãƒ–ãƒ©ãƒª)
- **ãƒ„ãƒ¼ãƒ«**: github.com/vektra/mockery/v2
- **ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**: `go install github.com/vektra/mockery/v2@latest`
- **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«**: `.mockery.yaml`
- **è‡ªå‹•ç”Ÿæˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª**: `internal/service/mocks/`, `internal/repository/mocks/`
- **ã‚³ãƒãƒ³ãƒ‰**: `make mocks` ã§mockã‚’å†ç”Ÿæˆ
- **ç‰¹å¾´**:
  - testify/mockã¨å®Œå…¨ã«çµ±åˆ
  - interfaceã‹ã‚‰è‡ªå‹•ã§mockç”Ÿæˆ
  - æ—¢å­˜ã®æ‰‹å‹•mockã¨äº’æ›æ€§ã‚ã‚Š
  - sqlboilerã¨åŒã˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ç®¡ç†
- **ç”Ÿæˆã•ã‚Œã‚‹mock**:
  - `UserService` â†’ `internal/service/mocks/MockUserService.go`
  - `MatchingService` â†’ `internal/service/mocks/MockMatchingService.go`
  - `UserRepository` â†’ `internal/repository/mocks/MockUserRepository.go`
- **ä½¿ã„æ–¹**:
  - ãƒ†ã‚¹ãƒˆã§ `servicemocks.NewMockUserService(t)` ã‚’ä½¿ç”¨
  - On/Return ã§ãƒ¢ãƒƒã‚¯å‹•ä½œã‚’è¨­å®š
  - AssertExpectations ã§æ¤œè¨¼
- **å‚è€ƒ**: https://vektra.github.io/mockery/

### Database Schema
- **ã‚¹ã‚­ãƒ¼ãƒãƒ•ã‚¡ã‚¤ãƒ«**: `db/schema.sql`
- **è‡ªå‹•ä½œæˆ**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•æ™‚ã«ã€ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯è‡ªå‹•çš„ã«ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆ
- **ãƒ†ã‚¹ãƒˆ**: `pkg/testutil/SetupTestDB` ã‚’ä½¿ç”¨ã—ã¦ãƒ†ã‚¹ãƒˆç”¨DBã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
  - e2e/integration_test.go: `testutil.SetupTestDB(t, testDBFile, "../db/schema.sql")`
  - internal/repository/user_repo_test.go: `testutil.SetupTestDB(t, "test_repo_cupid.db", "../../db/schema.sql")`
- **ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´**:
  - é–‹ç™ºåˆæœŸæ®µéšã®ãŸã‚ã€`db/schema.sql`ã‚’ç›´æ¥ç·¨é›†ã—ã¦OK
  - æœ¬ç•ªé‹ç”¨å¾Œã¯å¿…è¦ã«å¿œã˜ã¦ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ„ãƒ¼ãƒ«ã®å°å…¥ã‚’æ¤œè¨

## ä½¿ç”¨ã™ã‚‹gitã‚¢ã‚«ã‚¦ãƒ³ãƒˆ

- ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã§ã¯**morinonusi421**ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½¿ç”¨
- ä»–ã®ãƒªãƒã‚¸ãƒˆãƒªï¼ˆä»•äº‹ç”¨ãªã©ï¼‰ã¨ã¯åˆ¥ã®Gitã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- SSHè¨­å®šã§è‡ªå‹•çš„ã«éµã‚’åˆ‡ã‚Šæ›¿ãˆ

## é–‹ç™ºæ–¹é‡

### ç ´å£Šçš„å¤‰æ›´ã«ã¤ã„ã¦
- **ç¾åœ¨ã¯é–‹ç™ºä¸­ã®ãŸã‚ã€ç ´å£Šçš„å¤‰æ›´ã‚’æ°—ã«ã›ãšé€²ã‚ã‚‹**
- ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´ã‚„APIå¤‰æ›´ãªã©ã€å¾Œæ–¹äº’æ›æ€§ã‚’æ°—ã«ã›ãšãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å¯èƒ½
- æœ¬ç•ªãƒªãƒªãƒ¼ã‚¹æ™‚ã«æ”¹ã‚ã¦è¦‹ç›´ã—ãƒ»èª¿æ•´ã‚’è¡Œã†

### ç’°å¢ƒå¤‰æ•°ï¼ˆ.envï¼‰ã®æ›´æ–°ã«ã¤ã„ã¦
- **ãƒ­ãƒ¼ã‚«ãƒ«ã§`.env`ã‚’æ›´æ–°ã—ãŸå ´åˆã€EC2å´ã‚‚å¿…ãšæ›´æ–°ã™ã‚‹ã“ã¨**
- æ›´æ–°æ‰‹é †:
  1. ãƒ­ãƒ¼ã‚«ãƒ«ã§`.env`ã‚’ç·¨é›†
  2. EC2ã«SSHã—ã¦ã€åŒã˜å†…å®¹ã‚’EC2ã®`~/cupid/.env`ã«ã‚‚åæ˜ 
  3. `sudo systemctl restart cupid`ã§ã‚µãƒ¼ãƒãƒ¼å†èµ·å‹•

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

- [x] Phase 0: ç’°å¢ƒæº–å‚™ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰
- [x] Phase 1: ãƒ‰ãƒ¡ã‚¤ãƒ³å–å¾—ï¼ˆcupid-linebot.clickï¼‰
- [x] Phase 2: EC2åŸºæœ¬ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [x] Phase 3: Hello World (HTTP)
- [x] Phase 4: Nginx + ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·
- [x] Phase 5: HTTPSåŒ– + systemdã‚µãƒ¼ãƒ“ã‚¹åŒ–
- [x] Phase 6: LINE BotåŸºæœ¬å¿œç­”ï¼ˆã‚ªã‚¦ãƒ è¿”ã—ï¼‰
- [ ] Phase 7: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒ•ãƒ­ãƒ¼ã¨DBå®Ÿè£…
